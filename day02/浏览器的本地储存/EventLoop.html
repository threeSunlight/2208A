<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0" />
    <title>eventLoop</title>
</head>

<body>
    <script>
        /**
         * event loop: JS是单线程的，即同一时间只能执行一个任务
         * 两个任务:  1. 同步任务  --- 主线程 ---  执行栈 --前一个任务执行完后执行后一个任务
         *           2. 异步任务 --- 任务队列
         *                         2.1 宏任务  2.2 微任务
         * 
         * 执行顺序
         *    1. 先执行同步任务
         *    2. 在执行异步任务
         *        2.1 先执行微任务
         *        2.2 在执行宏任务
         * 
         * 总结: 执行顺序, 1: 先执行同步任务 2.执行微任务  3. 执行宏任务
         * 
         * 
         * 优先执行同步任务，
         * 遇到异步任务推入任务队列中，等同步任务执行完再执行任务队列中的异步任务，
         * 异步任务中又分宏任务和微任务，
         * 先执行微任务，
         * 再执行宏任务
         * 
         * ****/
        /**同步任务***/
        console.log(1);
        /***异步任务----宏任务**/
        setTimeout(() => {
            console.log(2);
        }, 0);
        /***同步任务***/
        new Promise((resolve, reject) => {
            console.log(3);
            resolve();
            /***异步任务----微任务***/
        }).then(() => {
            /**同步**/
            console.log(4);
        });
        /**同步任务****/
        console.log(5);


         /**同步任务****/
        console.log('a');

        /***异步任务----宏任务**/
        setTimeout(() => {
             /**同步任务****/
            console.log('b');
            /***异步任务----宏任务**/
            setTimeout(() => {
                console.log('g');
            }, 0);
            /**同步任务****/
            new Promise((resolve) => {
                resolve();
                /***异步任务----微任务***/
            }).then(() => {
                console.log('h');
            });
        }, 0);

           /**同步任务****/
        new Promise((resolve) => {
            console.log('c');
            resolve();
        })
            /***异步任务----微任务***/
            .then(function () {
                console.log('d');
            })
                /***异步任务----微任务***/
            .then(function () {
                console.log('e');
            });
          /**同步任务****/   
        console.log('f');    
    </script>
</body>

</html>